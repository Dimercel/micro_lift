# Руководство по API

В данном руководстве описаны все сигналы и уведомления, которые могут возникнуть во время жизненного цикла сервиса. 
Для передачи данных используется протокол WebSocket. Контракт по которому осуществляется обмен сообщениями:

```Java Script
{
    signal: ...,
    id: ...,
    data: {...}
}
```

* `signal` - уникальный идентификатор сигнала
* `id` - уникальный идентификатор запроса (формируется на стороне клиента)
* `data` - данные, для соответствующего сигнала

## auth
Прежде чем начать взаимодействие с сервисом необходимо аутентифицироваться в нем. Для этого потребуется уникальный идентификатор и токен.

**Параметры:**

* `uid` - уникальный идентификатор пользователя
* `timestamp` - штамп в формате ISO 8601
* `token` - секретный токен
* `weight` - вес актора

**Пример ответа:**

```Java Script
{
    "type": "response",
    "signal": "auth",
    "id": "my_id",
    "status": "ok",
    "data": {
        "status": "IDLE",
        "uid": "actor1",
        "weight": 71,
        "need_floor": null,
        "timestamp": "2021-12-07T06:00:07.944440Z",
        "floor": 1
    }
}
```

**Ошибки:**

* 403 - указанный токен истек. Токен действителен лишь некоторый отрезок времени и по его истечении не может быть использован для аутентификации 

## lift_list
Предоставляет информацию обо всех лифтах в здании.

**Параметры:**

* `count` - усекает выборку до указанного числа

**Пример ответа:**

```Java Script
{
    "type": "response",
    "signal": "lift_list",
    "id": "my_id",
    "status": "ok",
    "data": [
        {
            "id": "lift_0",
            "status": "STOPPED",
            "position": 0.01,
            "speed": 0.25,
            "passengers": [],
            "max_weight": 300
        }
    ]
}
```

## actor_list
Предоставляет информацию обо всех акторах.

**Параметры:**

* `count` - усекает выборку до указанного числа

**Пример ответа:**

```Java Script
{
    "type": "response",
    "signal": "actor_list",
    "id": "my_id",
    "status": "ok",
    "data": [
        {
            "status": "IDLE",
            "uid": "actor1",
            "timestamp": "2021-12-07T06:10:33.476684Z",
            "weight": 71,
            "need_floor": null,
            "floor": 1
        }
    ]
}
```
